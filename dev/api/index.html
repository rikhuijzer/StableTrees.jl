<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>API · StableTrees.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">StableTrees.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">StableTrees</a></li><li class="is-active"><a class="tocitem" href>API</a><ul class="internal"><li><a class="tocitem" href="#Types"><span>Types</span></a></li><li><a class="tocitem" href="#Methods"><span>Methods</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>API</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>API</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/rikhuijzer/StableTrees.jl/blob/main/docs/src/api.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="API"><a class="docs-heading-anchor" href="#API">API</a><a id="API-1"></a><a class="docs-heading-anchor-permalink" href="#API" title="Permalink"></a></h1><h2 id="Types"><a class="docs-heading-anchor" href="#Types">Types</a><a id="Types-1"></a><a class="docs-heading-anchor-permalink" href="#Types" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="StableTrees.StableRulesClassifier" href="#StableTrees.StableRulesClassifier"><code>StableTrees.StableRulesClassifier</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">StableRulesClassifier(;
    rng::AbstractRNG=default_rng(),
    partial_sampling::Real=0.7,
    n_trees::Int=1_000,
    max_depth::Int=2,
    q::Int=10,
    min_data_in_leaf::Int=5,
    max_rules::Int=10,
    weight_penalty::Float64=0.3,
) -&gt; MLJModelInterface.Probabilistic</code></pre><p>Explainable rule-based model based on a random forest. This SIRUS algorithm extracts rules from a stabilized random forest. See the <a href="https://huijzer.xyz/StableTrees.jl/dev/">main page of the documentation</a> for details about how it works.</p><p><strong>Example</strong></p><p>The classifier satisfies the MLJ interface, so it can be used like any other MLJ model. For example, it can be used to create a machine:</p><pre><code class="language-julia hljs">julia&gt; using StableTrees, MLJ

julia&gt; mach = machine(StableRulesClassifier(; max_rules=15), X, y);</code></pre><p><strong>Arguments</strong></p><ul><li><code>rng</code>: Random number generator. <code>StableRNGs</code> are advised.</li><li><code>partial_sampling</code>:   Ratio of samples to use in each subset of the data.   The default of 0.7 should be fine for most cases.</li><li><code>n_trees</code>:   The number of trees to use.   The higher the number, the more likely it is that the correct rules are extracted from the trees, but also the longer model fitting will take.   In most cases, 1000 rules should be more than enough, but it might be useful to run 2000 rules one time and verify that the model performance does not change much.</li><li><code>max_depth</code>:   The depth of the tree.   A lower depth decreases model complexity and can therefore improve accuracy when the sample size is small (reduce overfitting).</li><li><code>q</code>: Number of cutpoints to use per feature.   The default value of 10 should be good for most situations.</li><li><code>min_data_in_leaf</code>: Minimum number of data points per leaf.</li><li><code>max_rules</code>:   This is the most important hyperparameter.   In general, the more rules, the more accurate the model.   However, more rules will also decrease model interpretability.   So, it is important to find a good balance here.   In most cases, 10-40 rules should provide reasonable accuracy while remaining interpretable.</li><li><code>weight_penalty</code>:   This penalty regularizes the weights a bit.   Please don&#39;t use this hyperparameter.   It is likely to change in the future and it also doesn&#39;t have much of an effect.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rikhuijzer/StableTrees.jl/blob/ad603205c2f88579570e24db24fd7fcb81f07412/src/mlj.jl#L88-L141">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="StableTrees.StableForestClassifier" href="#StableTrees.StableForestClassifier"><code>StableTrees.StableForestClassifier</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">StableForestClassifier(;
    rng::AbstractRNG=default_rng(),
    partial_sampling::Real=0.7,
    n_trees::Int=1_000,
    max_depth::Int=2,
    q::Int=10,
    min_data_in_leaf::Int=5
) &lt;: MLJModelInterface.Probabilistic</code></pre><p>Random forest classifier with a stabilized forest structure (Bénard et al., <a href="http://proceedings.mlr.press/v130/benard21a.html">2021</a>). This stabilization increases stability when extracting rules. The impact on the predictive accuracy compared to standard random forests should be relatively small.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>Just like normal random forests, this model is not easily explainable. If you are interested in an explainable model, use the <code>StableRulesClassifier</code>.</p></div></div><p><strong>Example</strong></p><p>The classifier satisfies the MLJ interface, so it can be used like any other MLJ model. For example, it can be used to create a machine:</p><pre><code class="language-julia hljs">julia&gt; using StableTrees, MLJ

julia&gt; mach = machine(StableForestClassifier(), X, y);</code></pre><p><strong>Arguments</strong></p><ul><li><code>rng</code>: Random number generator. <code>StableRNGs</code> are advised.</li><li><code>partial_sampling</code>:   Ratio of samples to use in each subset of the data.   The default of 0.7 should be fine for most cases.</li><li><code>n_trees</code>: The number of trees to use.</li><li><code>max_depth</code>:   The depth of the tree.   A lower depth decreases model complexity and can therefore improve accuracy when the sample size is small (reduce overfitting).</li><li><code>q</code>: Number of cutpoints to use per feature.   The default value of 10 should be good for most situations.</li><li><code>min_data_in_leaf</code>: Minimum number of data points per leaf.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rikhuijzer/StableTrees.jl/blob/ad603205c2f88579570e24db24fd7fcb81f07412/src/mlj.jl#L36-L78">source</a></section></article><h2 id="Methods"><a class="docs-heading-anchor" href="#Methods">Methods</a><a id="Methods-1"></a><a class="docs-heading-anchor-permalink" href="#Methods" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="StableTrees.feature_names" href="#StableTrees.feature_names"><code>StableTrees.feature_names</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">feature_names(rule::Rule) -&gt; Vector{String}</code></pre><p>Return a vector of feature names; one for each clause in <code>rule</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rikhuijzer/StableTrees.jl/blob/ad603205c2f88579570e24db24fd7fcb81f07412/src/rules.jl#L107-L111">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="StableTrees.directions" href="#StableTrees.directions"><code>StableTrees.directions</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">directions(rule::Rule) -&gt; Vector{Symbol}</code></pre><p>Return a vector of split directions; one for each clause in <code>rule</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rikhuijzer/StableTrees.jl/blob/ad603205c2f88579570e24db24fd7fcb81f07412/src/rules.jl#L116-L120">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Base.values-Tuple{StableTrees.Rule}" href="#Base.values-Tuple{StableTrees.Rule}"><code>Base.values</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">values(rule::Rule) -&gt; Vector{Float64}</code></pre><p>Return a vector split values; one for each clause in <code>rule</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rikhuijzer/StableTrees.jl/blob/ad603205c2f88579570e24db24fd7fcb81f07412/src/rules.jl#L125-L129">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« StableTrees</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.22 on <span class="colophon-date" title="Friday 19 August 2022 16:19">Friday 19 August 2022</span>. Using Julia version 1.7.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
